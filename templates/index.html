<!DOCTYPE html>
<html>
<head>
    <title>DosageExplorer</title>
    <script src="https://unpkg.com/htmx.org"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="p-6 bg-gray-100">
    <div class="max-w-xl mx-auto bg-white rounded-xl shadow-md p-6">
        <h1 class="text-2xl font-bold mb-4">DosageExplorer</h1>

        <label class="block mb-4">
            <span class="text-gray-700">Dosierschema ausw√§hlen</span>
           <select name="schema"
        hx-get="/form"
        hx-target="#form-area"
        hx-trigger="change"
        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm">
                <option value="freetext" {% if schema == "freetext" %}selected{% endif %}>Freitext-Dosierung</option>
                <option value="mman" {% if schema == "mman" %}selected{% endif %}>Tageszeiten-Schema (MMAN)</option>
                <option value="timeofday" {% if schema == "timeofday" %}selected{% endif %}>Uhrzeit-Schema</option>
                <option value="weekday" {% if schema == "weekday" %}selected{% endif %}>Wochentag-Schema</option>
                <option value="interval" {% if schema == "interval" %}selected{% endif %}>wiederkehrende Intervalle</option>
                <option value="combined_interval_time" {% if schema == "combined_interval_time" %}selected{% endif %}>
                    Kombinationen von Zeitintervallen
                </option>
            </select>
        </label>

        <div id="form-area">
            {% include "form_fragment.html" %}
        </div>

        <div id="result" class="mt-6">
            {% if fhir %}
                <h2 class="text-xl font-semibold mb-2">FHIR-Objekt</h2>
                <pre class="bg-gray-200 p-4 rounded text-sm">{{ fhir | tojson(indent=2) }}</pre>
            {% endif %}
        </div>
    </div>
</body>
</html>